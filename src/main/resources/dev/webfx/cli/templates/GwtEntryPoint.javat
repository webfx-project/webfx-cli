package dev.webfx.platform.boot.gwt;

import com.google.gwt.core.client.EntryPoint;
import dev.webfx.platform.boot.ApplicationBooter;
import dev.webfx.platform.boot.spi.ApplicationBooterProvider;
import dev.webfx.platform.reflect.RArray;
import dev.webfx.platform.util.elemental2.Elemental2Util;

import elemental2.dom.DomGlobal;
import elemental2.dom.ServiceWorkerContainer;

import static dev.webfx.platform.service.gwtj2cl.ServiceRegistry.*;

public final class GwtEntryPoint implements ApplicationBooterProvider, EntryPoint {

    @Override
    public void onModuleLoad() {
        registerArrayConstructors();
        registerServiceProviders();
        ApplicationBooter.start(this, null);
        Elemental2Util.registerPwa();
    }

    private static void registerArrayConstructors() {
${registerArrayConstructorsBody}
    }

    private static void registerServiceProviders() {
${registerServiceProvidersBody}
    }
}